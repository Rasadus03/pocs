<?xml version="1.0" encoding="UTF-8"?>
<switchyard xmlns="urn:switchyard-config:switchyard:1.0" xmlns:bean="urn:switchyard-component-bean:config:1.0" xmlns:sca="http://docs.oasis-open.org/ns/opencsa/sca/200912" xmlns:soap="urn:switchyard-component-soap:config:1.0" xmlns:trfm="urn:switchyard-config:transform:1.0" name="gpe-basic-auth-soap" targetNamespace="urn:gpe-basic-auth-soap:1.0">
  <sca:composite name="gpe-basic-auth-soap" targetNamespace="urn:gpe-basic-auth-soap:1.0">
    <sca:component name="BeanOne">
      <bean:implementation.bean class="com.wavechain.jaxws.BeanOne"/>
      <sca:service name="IBeanOne">
        <sca:interface.java interface="org.switchyard.quickstarts.IBeanOne"/>
      </sca:service>
      <sca:reference name="IJaxWS_Service">
        <sca:interface.java interface="com.wavechain.jaxws.IJaxWS_Service"/>
      </sca:reference>
    </sca:component>
    <sca:service name="IBeanOnePortType" promote="BeanOne/IBeanOne">
      <sca:interface.wsdl interface="IBeanOne.wsdl#wsdl.porttype(IBeanOnePortType)"/>
      <soap:binding.soap>
        <soap:contextMapper/>
        <soap:wsdl>IBeanOne.wsdl</soap:wsdl>
        <soap:wsdlPort>IBeanOnePort</soap:wsdlPort>
        <!--soap:contextPath>BeanOne</soap:contextPath -->
        <soap:endpointAddress>http://zareason:8355/BeanOne</soap:endpointAddress>
      </soap:binding.soap>
    </sca:service>
    <sca:reference name="jaxwsWsdl_PortType" multiplicity="0..1" promote="BeanOne/IJaxWS_Service">
      <sca:interface.wsdl interface="helloJaxWS.wsdl#wsdl.porttype(jaxwsWsdl_PortType)"/>
      <soap:binding.soap>

        <!-- https://community.jboss.org/message/820205#820205 -->
        <soap:contextMapper includes="Authorization" includeNamespaces=".*" soapHeadersType="VALUE" />

        <soap:messageComposer class="org.switchyard.quickstarts.BasicAuthSOAPMessageComposer"/>
        <soap:wsdl>helloJaxWS.wsdl</soap:wsdl>
        <soap:wsdlPort>jaxwsWsdl_PortTypePort</soap:wsdlPort>
        <soap:endpointAddress>http://zareason:8355/helloJaxWS</soap:endpointAddress>
      </soap:binding.soap>
    </sca:reference>
  </sca:composite>
  <transforms>
    <trfm:transform.jaxb from="{quickstarts.switchyard.org}sanityCheck" to="java:java.lang.String" contextPath="org.switchyard.quickstarts"/>
    <trfm:transform.jaxb from="java:com.wavechain.jaxws.SanityCheck" to="{http://jaxws.wavechain.com}sanityCheck" contextPath="com.wavechain.jaxws"/>
    <trfm:transform.jaxb from="{http://jaxws.wavechain.com}sanityCheckResponse" to="java:com.wavechain.jaxws.SanityCheckResponse" contextPath="com.wavechain.jaxws"/>
  </transforms>
</switchyard>
